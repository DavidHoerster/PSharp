namespace PingPong
{
    machine Server
    {
        machine Client;

        start state Init
        {
            entry
            {
				this.Client = create(Client , Config, this);
				jump(Playing);
            }
        }
		
        state Playing
        {
            entry
            {
				send(this.Client, Pong);
            }

            on Unit do SendPong;
            on Ping do SendPong;
        }

        void SendPong()
        {
			send(this.Client, Pong);
        }
    }
}
