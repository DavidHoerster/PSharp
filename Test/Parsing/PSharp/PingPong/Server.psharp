using System;

namespace PingPong
{
    main machine Server
    {	
        Client Client;

        start state Init
        {
            entry
            {
                this.Client = create Client ( this );
                raise Unit;
            }

            on Unit goto Playing;
        }
		
        state Playing
        {
            entry
            {
                send Pong to this.Client;
            }

            on Unit do SendPong;
            on Ping do SendPong;
        }

        action SendPong
        {
            send Pong to this.Client;
        }
    }
}
